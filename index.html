<!DOCTYPE html> <!-- ุชุนุฑูู ููุน ุงููุณุชูุฏ ุจุฃูู HTML5 -->
<html lang="ar" dir="rtl"> <!-- ุจุฏุก ุตูุญุฉ HTML ูุน ุชุญุฏูุฏ ุงููุบุฉ ุนุฑุจูุฉ ูุงูุงุชุฌุงู ูู ุงููููู ูููุณุงุฑ -->
<head>
    <meta charset="UTF-8"> <!-- ุชุญุฏูุฏ ุชุฑููุฒ ุงูุฃุญุฑู ููููู UTF-8 ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ -->
    <title>ุฎุฑูุทุฉ ุงูุฌุงูุนุฉ - ุฌุงูุนุฉ ุงูุทุงุฆู</title> <!-- ุนููุงู ุงูุตูุญุฉ ุงูุฐู ูุธูุฑ ูู ุงูุชุจููุจ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- ุถุจุท ุนุฑุถ ุงูุตูุญุฉ ูุชูุงุณุจ ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ -->

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" /> <!-- ุงุณุชุฏุนุงุก ููุชุจุฉ Leaflet ุงูุฎุงุตุฉ ุจุงูุฎุฑุงุฆุท -->
    <script src="/path/to/buildings-data.js"></script> <!-- ุงุณุชุฏุนุงุก ููู ุจูุงูุงุช ุงููุจุงูู -->

    <style>
    /* โ ุชูุณูู ุญูู ุงูุจุญุซ */
    .search-container input {
        width: 300px; /* ุชุญุฏูุฏ ุนุฑุถ ุญูู ุงูุจุญุซ ุจู 300 ุจูุณู */
        padding: 7px 12px; /* ุชุญุฏูุฏ ุงูุญุดู ุงูุฏุงุฎูู (7 ุจูุณู ุฃุนูู ูุฃุณููุ 12 ุจูุณู ูููู ููุณุงุฑ) */
        font-size: 14px; /* ุชุญุฏูุฏ ุญุฌู ุฎุท ุงููุต ุฏุงุฎู ุญูู ุงูุฅุฏุฎุงู */
        border-radius: 6px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุญูู ุจููุฏุงุฑ 6 ุจูุณู */
        border: 1px solid #ccc; /* ุฅุถุงูุฉ ุฅุทุงุฑ ุฑููุน ุจููู ุฑูุงุฏู ูุงุชุญ */
    }
    </style>

    <style>
    /* โ ุณุชุงูู ูุชุบููุฑ ุดูู ุงููุคุดุฑ ุฅูู ุฏุจูุณ */
    .cursor-pin {
        cursor: url('https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2_hdpi.png') 16 32, auto; 
        /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ุฅูู ุฏุจูุณ ุนูุฏ ุงููุฑูุฑ ููู ุนูุงุตุฑ ูุนููุฉ */
    }
    </style>

    <style>
    /* โ ุณุชุงูู ุฒุฑ ุงูุงุชุฌุงูุงุช */
    .direction-button {
        padding: 12px 20px; /* ุญุดู ุฏุงุฎูู: 12 ุจูุณู ุฃุนูู ูุฃุณููุ 20 ุจูุณู ูููู ููุณุงุฑ */
        background-color: #007bff; /* ููู ุฎูููุฉ ุฃุฒุฑู */
        color: white; /* ููู ุงูุฎุท ุฃุจูุถ */
        font-size: 1.2em; /* ุญุฌู ุงูุฎุท ุฃูุจุฑ ููููุงู */
        border: none; /* ุจุฏูู ุญุฏูุฏ ููุฒุฑ */
        border-radius: 8px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุฒุฑ ุจููุฏุงุฑ 8 ุจูุณู */
        cursor: pointer; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ุฅูู ูุฏ ุนูุฏ ุงููุฑูุฑ ููู ุงูุฒุฑ */
        transition: background-color 0.3s, transform 0.2s; /* ุชุฃุซูุฑ ุงูุชูุงูู ูููู ุงูุฎูููุฉ ูุงูุชุญุฌูู */
        width: 100%; /* ุฌุนู ุนุฑุถ ุงูุฒุฑ ูุฃุฎุฐ 100% ูู ุงูุญุงููุฉ */
    }

    .direction-button:hover {
        background-color: #0056b3; /* ุนูุฏ ุงูุชูุฑูุฑ ุนูู ุงูุฒุฑ: ุชุบููุฑ ุงูููู ุฅูู ุฃุฒุฑู ุบุงูู */
        transform: scale(1.05); /* ุชูุจูุฑ ุงูุฒุฑ ุจูุณุจุฉ ุจุณูุทุฉ ุนูุฏ ุงููุฑูุฑ ุนููู */
    }
    </style>

    <style>
    /* โ ุณุชุงูู ูุงุฆูุฉ ุงููุฆุงุช */
    .category-list li {
        display: flex; /* ุชุฑุชูุจ ุงููุญุชููุงุช ุจุฏุงุฎู ุงูุนูุตุฑ ุจุดูู ุฃููู */
        align-items: center; /* ูุญุงุฐุงุฉ ุงููุญุชููุงุช ุนููุฏููุง ุจุงูููุชุตู */
        cursor: pointer; /* ุฌุนู ุงููุคุดุฑ ุนูู ุดูู ูุฏ */
        padding: 8px; /* ุฅุถุงูุฉ ุญุดู ุฏุงุฎูู ุจููุฏุงุฑ 8 ุจูุณู */
        transition: transform 0.2s ease, background-color 0.2s ease; /* ุชุฃุซูุฑุงุช ุงูุชูุงููุฉ ููุชุญุฌูู ูุชุบููุฑ ุงูุฎูููุฉ */
        border-radius: 8px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุนูุตุฑ */
    }

    .category-list li img {
        width: 24px; /* ุชุญุฏูุฏ ุนุฑุถ ุงูุตูุฑ ุฏุงุฎู ุงูุนูุตุฑ ุจู 24 ุจูุณู */
        height: 24px; /* ุชุญุฏูุฏ ุงุฑุชูุงุน ุงูุตูุฑ ุฃูุถูุง ุจู 24 ุจูุณู */
        margin-left: 8px; /* ุฅุถุงูุฉ ูุณุงูุฉ ูุณุงุฑ ุงูุตูุฑุฉ ุจููุฏุงุฑ 8 ุจูุณู */
        transition: transform 0.2s ease; /* ุชุฃุซูุฑ ุงูุชูุงูู ูุชุญุฌูู ุงูุตูุฑุฉ */
    }

    /* ุนูุฏ ุงููุฑูุฑ Hover */
    .category-list li:hover {
        transform: scale(1.05); /* ุชูุจูุฑ ุงูุนูุตุฑ ุนูุฏ ุงููุฑูุฑ ุนููู */
        background-color: #f0f0f0; /* ุชุบููุฑ ููู ุงูุฎูููุฉ ุฅูู ุฑูุงุฏู ูุงุชุญ */
    }

    /* ุนูุฏ ุงูุถุบุท Active */
    .category-list li:active {
        transform: scale(0.95); /* ุชุตุบูุฑ ุงูุนูุตุฑ ููููุงู ุนูุฏ ุงูุถุบุท */
        background-color: #e0e0e0; /* ุชุบููุฑ ููู ุงูุฎูููุฉ ุฅูู ุฑูุงุฏู ุฃุบูู */
    }

    .category-list li span {
        font-size: 16px; /* ุชุญุฏูุฏ ุญุฌู ุฎุท ุงููุต ุฏุงุฎู ุงูุนูุตุฑ */
        color: black; /* ุฌุนู ููู ุงููุต ุฃุณูุฏ */
    }
    </style>

    <style>
    /* ๐ป ุณุชุงูู ุงูููุฏุฑ ูุงูุดุฑูุท ุงูุฌุงูุจู ููุดุงุดุงุช ุงููุจูุฑุฉ */
    header {
        height: 80px; /* ุชุญุฏูุฏ ุงุฑุชูุงุน ุงูููุฏุฑ ุจู 80 ุจูุณู */
        background-color: #f8f8f8; /* ุชุนููู ููู ุฎูููุฉ ูุงุชุญ ููููุฏุฑ */
        display: flex; /* ุงุณุชุฎุฏุงู Flexbox ูุชุฑุชูุจ ุงูุนูุงุตุฑ ุจุดูู ุฃููู */
        align-items: center; /* ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ ุนููุฏููุง ูู ุงูููุชุตู */
        justify-content: space-between; /* ุชูุฒูุน ุงูุนูุงุตุฑ ูุน ุชุฑู ูุณุงูุฉ ุจูููุง */
        padding: 0 20px; /* ููุงูุด ุฏุงุฎููุฉ: 20 ุจูุณู ูููู ููุณุงุฑ */
    }

    header img {
        height: 60px; /* ุชุญุฏูุฏ ุงุฑุชูุงุน ุดุนุงุฑ ุงูุฌุงูุนุฉ ุฃู ุงูุตูุฑุฉ ุฏุงุฎู ุงูููุฏุฑ */
    }

    header h1 {
        font-size: 28px; /* ุชุญุฏูุฏ ุญุฌู ุฎุท ุนููุงู ุงูููุฏุฑ */
    }

    /* โ ุณุชุงูู ุงูุดุฑูุท ุงูุฌุงูุจู */
    .sidebar {
        width: 250px; /* ุชุญุฏูุฏ ุนุฑุถ ุงูุดุฑูุท ุงูุฌุงูุจู ุจู 250 ุจูุณู */
        float: right; /* ุฌุนู ุงูุดุฑูุท ุงูุฌุงูุจู ูุธูุฑ ุนูู ุงููููู */
        background-color: #ddd; /* ุชุนููู ููู ุฎูููุฉ ุงูุนูุตุฑ ุฅูู ุฑูุงุฏู ูุงุชุญ (ุงูุฑูุฒ #ddd) */

    }
    
    /* ๐ฑ ููุง ุชููู ุงูุดุงุดุฉ ุฃูู ูู 768px (ุฌูุงู) */
@media (max-width: 768px) { /* ุชุทุจูู ุงูุชูุณููุงุช ุงูุชุงููุฉ ููุดุงุดุงุช ุจุนุฑุถ ุฃูู ูู 768 ุจูุณู */
    header { /* ุชููุฆุฉ ุงูููุฏุฑ */
        height: auto; /* ุฌุนู ุงุฑุชูุงุน ุงูููุฏุฑ ุขูู ุญุณุจ ูุญุชูุงู */
        flex-direction: column; /* ุชุฑุชูุจ ุนูุงุตุฑ ุงูููุฏุฑ ุนููุฏููุง ููู ุจุนุถ */
        padding: 10px; /* ุฅุถุงูุฉ ุญุดู ุฏุงุฎูู ุจููุฏุงุฑ 10 ุจูุณู */
    }

    header img { /* ุชููุฆุฉ ุตูุฑุฉ ุงูุดุนุงุฑ ุฏุงุฎู ุงูููุฏุฑ */
        height: 40px; /* ุชุตุบูุฑ ุงุฑุชูุงุน ุงูุดุนุงุฑ ุฅูู 40 ุจูุณู */
    }

    header h1 { /* ุชููุฆุฉ ุนููุงู ุงูููุฏุฑ */
        font-size: 20px; /* ุชุตุบูุฑ ุญุฌู ุงูุฎุท ูู ุนููุงู ุงูููุฏุฑ */
    }

    .sidebar { /* ุชููุฆุฉ ุงูุดุฑูุท ุงูุฌุงูุจู */
        width: 100%; /* ุฌุนู ุนุฑุถ ุงูุดุฑูุท ุงูุฌุงูุจู 100% ูู ุนุฑุถ ุงูุดุงุดุฉ */
        float: none; /* ุฅุฒุงูุฉ ุฎุงุตูุฉ float ูุฃูู ููุณ ูุทููุจูุง ูู ุงูุฌูุงู */
    }
}
</style>

<style>
/* โ ุงูุดุฑูุท ุงูุฌุงูุจู ุงูุฃุณุงุณู (ููุฌูุฏ ุนูุฏู ุณุงุจูุงู) */
.sidebar .icon img { /* ุชููุฆุฉ ุตูุฑุฉ ุงูุฃููููุฉ ุฏุงุฎู ุงูุดุฑูุท ุงูุฌุงูุจู */
    width: 40px; /* ุชุญุฏูุฏ ุนุฑุถ ุงูุฃููููุฉ ุจู 40 ุจูุณู */
    height: 40px; /* ุชุญุฏูุฏ ุงุฑุชูุงุน ุงูุฃููููุฉ ุจู 40 ุจูุณู */
    transition: transform 0.3s ease; /* ุฅุถุงูุฉ ุญุฑูุฉ ูุงุนูุฉ ุนูุฏ ุงูุชูุจูุฑ */
}

/* โ ุนูุฏ ุงููุฑูุฑ ุนูู ุงูุฃููููุฉ */
.sidebar .icon:hover img { /* ุนูุฏ ุชูุฑูุฑ ุงููุงูุณ ููู ุงูุฃููููุฉ */
    transform: scale(1.2); /* ุชูุจูุฑ ุงูุฃููููุฉ ุจูุณุจุฉ 20% */
}

/* โ ุฃูุถุงู ุชูุจูุฑ ุงููุต ูุน ุงูุฃููููุฉ ูู ุฃุฑุฏุช */
.sidebar .icon:hover span { /* ุนูุฏ ุชูุฑูุฑ ุงููุงูุณ ููู ุงูุนูุตุฑ ุงููุตู */
    font-size: 16px; /* ุชูุจูุฑ ุญุฌู ุงูุฎุท ููููุงู ุนูุฏ ุงููุฑูุฑ */
}
</style>

<style>
/* โ ุฅุนุฏุงุฏุงุช ุฃุณุงุณูุฉ ููุตูุญุฉ */
body, html { /* ุชููุฆุฉ ุนูุตุฑ ุงูู body ู html */
    margin: 0; /* ุฅุฒุงูุฉ ุงูููุงูุด ุงูุงูุชุฑุงุถูุฉ */
    padding: 0; /* ุฅุฒุงูุฉ ุงูุญุดู ุงูุงูุชุฑุงุถู */
    height: 100%; /* ุฌุนู ุงูุงุฑุชูุงุน 100% ูู ูุงูุฐุฉ ุงููุชุตูุญ */
    overflow: hidden; /* ููุน ุธููุฑ ุดุฑูุท ุงูุชูุฑูุฑ */
    font-family: Arial, sans-serif; /* ุชุนููู ููุน ุงูุฎุท */
}

#map { /* ุชููุฆุฉ ุฎุฑูุทุฉ Leaflet */
    height: 100vh; /* ุฌุนู ุงุฑุชูุงุน ุงูุฎุฑูุทุฉ ูููุฃ ูุงูู ุงุฑุชูุงุน ุงููุงูุฐุฉ */
    width: 100%; /* ุฌุนู ุนุฑุถ ุงูุฎุฑูุทุฉ ูููุฃ ูุงูู ุนุฑุถ ุงููุงูุฐุฉ */
    position: absolute; /* ุชุญุฏูุฏ ููุถุน ุงูุฎุฑูุทุฉ ุจุดูู ูุทูู */
    top: 0; /* ูุถุน ุงูุฎุฑูุทุฉ ูู ุฃุนูู ุงูุตูุญุฉ */
    right: 0; /* ูุญุงุฐุงุฉ ุงูุฎุฑูุทุฉ ุฅูู ุงูุฌูุฉ ุงููููู */
    z-index: 0; /* ูุถุน ุงูุฎุฑูุทุฉ ูู ุงูุฎูููุฉ */
}

#loadingMessage { /* ุชููุฆุฉ ุฑุณุงูุฉ ุงูุชุญููู */
    position: fixed; /* ุชุซุจูุช ุงูุฑุณุงูุฉ ูู ููุงู ุซุงุจุช */
    top: 50%; /* ูุถุน ุงูุฑุณุงูุฉ ูู ููุชุตู ุงุฑุชูุงุน ุงูุดุงุดุฉ */
    left: 50%; /* ูุถุน ุงูุฑุณุงูุฉ ูู ููุชุตู ุนุฑุถ ุงูุดุงุดุฉ */
    transform: translate(-50%, -50%); /* ุถุจุท ุงูุฑุณุงูุฉ ุชูุงููุง ูู ุงูููุชุตู */
    font-size: 20px; /* ุชุญุฏูุฏ ุญุฌู ุงูุฎุท */
    color: #007BFF; /* ููู ุงูุฎุท ุฃุฒุฑู */
    z-index: 1000; /* ูุถุน ุงูุฑุณุงูุฉ ููู ุงูุฎุฑูุทุฉ */
    display: none; /* ุฅุฎูุงุก ุงูุฑุณุงูุฉ ุงูุชุฑุงุถููุง */
}

/* โ ุงูุดุฑูุท ุงูุฌุงูุจู ุฃุณูุฏ ูุงููุชุงุจุฉ ุจูุถุงุก ูุชูุจูุฑ ุงูุฃููููุงุช */
.sidebar { /* ุชููุฆุฉ ุงูุดุฑูุท ุงูุฌุงูุจู */
    position: fixed; /* ุชุซุจูุช ุงูุดุฑูุท ุงูุฌุงูุจู ูู ููุงูู */
    top: 0; /* ุจุฏุงูุฉ ูู ุฃุนูู ุงูุตูุญุฉ */
    right: 0; /* ูุญุงุฐุงุฉ ููุดูุงู (ุงุชุฌุงู RTL ูุนูู ุฌูุฉ ุงููููู) */
    width: 80px; /* ุชุญุฏูุฏ ุนุฑุถ ุงูุดุฑูุท ุงูุฌุงูุจู ุจู 80 ุจูุณู */
    height: 100%; /* ุฌุนู ุงุฑุชูุงุนู 100% ูู ุงุฑุชูุงุน ุงูุตูุญุฉ */
    background-color: #000; /* ููู ุฎูููุชู ุฃุณูุฏ */
    border-left: 1px solid #333; /* ุฅุถุงูุฉ ุฎุท ูุงุตู ุฑูุงุฏู ุบุงูู ุนูู ูุณุงุฑู */
    display: flex; /* ุงุณุชุฎุฏุงู Flexbox ูุชุฑุชูุจ ุงูุฃููููุงุช ุนููุฏููุง */
    flex-direction: column; /* ุฌุนู ุงุชุฌุงู ุงูุนูุงุตุฑ ุนููุฏู */
    align-items: center; /* ูุญุงุฐุงุฉ ุงูุฃููููุงุช ูู ููุชุตู ุงููุญูุฑ ุงูุฃููู */
    padding-top: 10px; /* ุฅุถุงูุฉ ุญุดู ุนููู ุจููุฏุงุฑ 10 ุจูุณู */
    z-index: 1001; /* ูุถุน ุงูุดุฑูุท ููู ุจููุฉ ุงูุนูุงุตุฑ */
}

.sidebar .icon { /* ุชููุฆุฉ ุญุงููุฉ ุงูุฃููููุฉ */
    margin: 20px 0; /* ุฅุถุงูุฉ ูุณุงูุฉ ููู ูุชุญุช ูู ุฃููููุฉ */
    cursor: pointer; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ููุฏ ูุงุจู ููููุฑ */
    text-align: center; /* ุชูุณูุท ูุญุชูู ุงูุฃููููุฉ ูุงููุต */
    color: white; /* ุฌุนู ููู ุงููุต ุฃุจูุถ */
}

.sidebar .icon img { /* ุชููุฆุฉ ุตูุฑุฉ ุงูุฃููููุฉ */
    width: 40px; /* ุนุฑุถ ุงูุฃููููุฉ 40 ุจูุณู */
    height: 40px; /* ุงุฑุชูุงุน ุงูุฃููููุฉ 40 ุจูุณู */
}

.sidebar .icon span { /* ุชููุฆุฉ ูุต ุงูุฃููููุฉ */
    font-size: 14px; /* ุญุฌู ุงูุฎุท 14 ุจูุณู */
    display: block; /* ุนุฑุถ ุงููุต ูุณุทุฑ ูุณุชูู */
    margin-top: 5px; /* ุฅุถุงูุฉ ูุณุงูุฉ ููู ุงููุต */
    color: white; /* ููู ุงููุต ุฃุจูุถ */
}

.sub-sidebar { /* ุชููุฆุฉ ุงูุดุฑูุท ุงููุฑุนู */
    position: fixed; /* ุชุซุจูุชู ูู ููุงู ุซุงุจุช */
    top: 0; /* ุจุฏุงูุฉ ูู ุฃุนูู ุงูุตูุญุฉ */
    right: 80px; /* ูุถุนู ุนูู ุจุนุฏ 80 ุจูุณู ูู ุงูุฌูุฉ ุงููููู (ุฌูุจ ุงูุดุฑูุท ุงูุฃุณุงุณู) */
    width: 220px; /* ุชุญุฏูุฏ ุนุฑุถู 220 ุจูุณู */
    height: 100%; /* ุฌุนู ุงุฑุชูุงุนู 100% */
    background-color: #111; /* ุฎูููุฉ ุฏุงููุฉ ุฌุฏูุง */
    border-left: 1px solid #333; /* ุฅุถุงูุฉ ุฎุท ูุงุตู ุฑูุงุฏู ุบุงูู ุนูู ูุณุงุฑู */
    padding: 10px; /* ุญุดู ุฏุงุฎูู 10 ุจูุณู */
    overflow-y: auto; /* ุชูููู ุงูุชูุฑูุฑ ุงูุนููุฏู ุนูุฏ ุฒูุงุฏุฉ ุงููุญุชูู */
    display: none; /* ุฅุฎูุงุคู ุงูุชุฑุงุถููุง */
    z-index: 1000; /* ูุถุนู ููู ุงูุฎุฑูุทุฉ ูุชุญุช ุงูุดุฑูุท ุงูุฃุณุงุณู */
    color: white; /* ููู ุงููุต ุฃุจูุถ */
}

.sub-sidebar h3, .sub-sidebar span, .sub-sidebar p { /* ุงุณุชูุฏุงู ุนูุงููู ุงููุฆุฉ ูุงูููุฑุงุช ุฏุงุฎู ุงูุดุฑูุท ุงููุฑุนู */  
    color: white; /* ุฌุนู ููู ุงููุต ุฃุจูุถ */  
}

#messageBox { /* ุจุฏุก ุฅุนุฏุงุฏ ุตูุฏูู ุงูุฑุณุงุฆู ุงูููุจุซู */  
    position: fixed; /* ุชุซุจูุช ุงูุตูุฏูู ุจูููุน ุซุงุจุช ุนูู ุงูุดุงุดุฉ */  
    top: 50%; /* ูุถุนู ูู ููุชุตู ุงุฑุชูุงุน ุงูุดุงุดุฉ */  
    left: 50%; /* ูุถุนู ูู ููุชุตู ุนุฑุถ ุงูุดุงุดุฉ */  
    transform: translate(-50%, -50%); /* ุชุนููุถ ุงูููุทุฉ ุงููุฑุฌุนูุฉ ูุฌุนู ุงูุตูุฏูู ูู ุงูููุชุตู ุชูุงููุง */  
    background: rgba(0, 0, 0, 0.9); /* ุฎูููุฉ ุณูุฏุงุก ุดุจู ุดูุงูุฉ ุจูููุฉ 0.9 */  
    color: white; /* ุฌุนู ููู ุงููุต ุฃุจูุถ */  
    padding: 20px 30px; /* ุญุดู ุฏุงุฎูู: 20 ุจูุณู ุนููุฏูุ 30 ุจูุณู ุฃููู */  
    border-radius: 15px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุตูุฏูู ุจููุฏุงุฑ 15 ุจูุณู */  
    text-align: center; /* ุชูุณูุท ุงููุต ุฏุงุฎู ุงูุตูุฏูู */  
    box-shadow: 0 0 30px rgba(0,0,0,0.5); /* ุฅุถุงูุฉ ุธู ุฎุงุฑุฌู ูุงุนู */  
    z-index: 2000; /* ูุถุน ุงูุตูุฏูู ููู ูุนุธู ุงูุนูุงุตุฑ */  
    display: none; /* ุฅุฎูุงุคู ุงูุชุฑุงุถููุง */  
}

#messageBox button { /* ุฅุนุฏุงุฏ ุฒุฑ ุฏุงุฎู ุตูุฏูู ุงูุฑุณุงุฆู */  
    margin-top: 10px; /* ูุณุงูุฉ ููู ุงูุฒุฑ */  
    padding: 10px 20px; /* ุญุดู ุฏุงุฎูู: 10 ุจูุณู ุนููุฏูุ 20 ุจูุณู ุฃููู */  
    background-color: #1e90ff; /* ููู ุฎูููุฉ ุฃุฒุฑู ุฏุงูู */  
    color: white; /* ููู ูุต ุงูุฒุฑ ุฃุจูุถ */  
    border: none; /* ุฅุฒุงูุฉ ุงูุญุฏูุฏ ุงูุงูุชุฑุงุถูุฉ */  
    border-radius: 8px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุฒุฑ */  
    cursor: pointer; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ุฅูู ูุฏ */  
}

/* ุฒุฑ ุชููุชุฑ */ /* ุนูุงูุฉ ุจุฏุงูุฉ ุจููู ุฅุนุฏุงุฏ ุฒุฑ ุชููุชุฑ */  
.twitter-button { /* ุฅุนุฏุงุฏ ุฒุฑ ุชููุชุฑ ูุฑุงุจุท */  
    display: inline-block; /* ุนุฑุถู ููุชูุฉ ุถูู ุงููุต */  
    margin-top: 15px; /* ูุณุงูุฉ ููู ุงูุฒุฑ */  
    padding: 10px 20px; /* ุญุดู ุฏุงุฎูู: 10 ุจูุณู ุนููุฏูุ 20 ุจูุณู ุฃููู */  
    background-color: #1da1f2; /* ููู ุฎูููุฉ ุชููุชุฑ ุงูุฃุฒุฑู */  
    color: white; /* ููู ูุต ุงูุฒุฑ ุฃุจูุถ */  
    border-radius: 5px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุฒุฑ ููููุงู */  
    text-decoration: none; /* ุฅุฒุงูุฉ ุฎุท ุงูุชุญุชู */  
    text-align: center; /* ุชูุณูุท ุงููุต ุฏุงุฎู ุงูุฒุฑ */  
}

/* ุชุฃุซูุฑ ุงูุชููุฌ */ /* ุนูุงูุฉ ุจุฏุงูุฉ ุจููู ููุชุฑ ุงูุชููุฌ */  
svg .glow-path { /* ุงุณุชูุฏุงู ุงููุณุงุฑุงุช ุงูุญุงููุฉ ูุตูู ุงูุชููุฌ ุฏุงุฎู SVG */  
    filter: url(#glow-filter); /* ุชุทุจูู ููุชุฑ ุงูุชููุฌ ุนุจุฑ ูุนุฑูู ุงูููุชุฑ */  
}
</style>

<style>
.topbar { /* ุฅุนุฏุงุฏ ุดุฑูุท ุงูููุฉ */  
    position: fixed; /* ุชุซุจูุชู ูู ุฃุนูู ุงูุตูุญุฉ */  
    top: 0; /* ุจุฏุงูุฉ ูู ุฃุนูู ุงููุงูุฐุฉ */  
    left: 0; /* ุจุฏุงูุฉ ูู ุงููุณุงุฑ */  
    right: 0; /* ุญุชู ุงูุญุงูุฉ ุงููููู */  
    height: 60px; /* ุงุฑุชูุงุน ุงูุดุฑูุท 60 ุจูุณู */  
    background-color: white; /* ุฎูููุฉ ุจูุถุงุก */  
    z-index: 2000; /* ููู ูุนุธู ุงูุนูุงุตุฑ */  
    display: flex; /* ุงุณุชุฎุฏุงู Flexbox ูุชุฑุชูุจ ุงููุญุชูู */  
    align-items: center; /* ูุญุงุฐุงุฉ ุนููุฏููุง ูู ุงูููุชุตู */  
    justify-content: space-between; /* ุชูุฒูุน ุงููุญุชูู ูุน ูุณุงุญุฉ ูุชุณุงููุฉ */  
    padding: 0 20px; /* ุญุดู ุฃููู 20 ุจูุณู */  
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* ุธู ุฎููู ุฃุณูู ุงูุดุฑูุท */  
    direction: rtl; /* ุงุชุฌุงู ุงููุชุงุจุฉ ูู ุงููููู ูููุณุงุฑ */  
}

.language-switch { /* ุฅุนุฏุงุฏ ุญุงููุฉ ุชุจุฏูู ุงููุบุฉ */  
    display: flex; /* ุชุฑุชูุจ ุงูุฃุฒุฑุงุฑ ุฃููููุง */  
    align-items: center; /* ูุญุงุฐุงุฉ ุนููุฏููุง */  
    gap: 8px; /* ูุณุงูุฉ 8 ุจูุณู ุจูู ุงูุนูุงุตุฑ */  
    font-weight: bold; /* ุฌุนู ุงููุต ุนุฑูุถูุง */  
    font-size: 14px; /* ุญุฌู ุฎุท 14 ุจูุณู */  
}

.language-switch button { /* ุฅุนุฏุงุฏ ุฃุฒุฑุงุฑ ูุบุฉ ุงูุดุฑูุท */  
    background: none; /* ุฅุฒุงูุฉ ุงูุฎูููุฉ */  
    border: none; /* ุฅุฒุงูุฉ ุงูุญุฏูุฏ */  
    cursor: pointer; /* ุชุบููุฑ ุงููุคุดุฑ ุฅูู ูุฏ */  
    font-weight: bold; /* ุฌุนู ุงููุต ุนุฑูุถูุง */  
}

.search-container { /* ุฅุนุฏุงุฏ ุญุงููุฉ ุงูุจุญุซ ุฏุงุฎู ุงูุดุฑูุท */  
    display: flex; /* ุชุฑุชูุจ ุญูู ุงูุจุญุซ ูุงูุฒุฑ ุฃููููุง */  
    justify-content: center; /* ุชูุณูุทูู ุฃููููุง */  
    align-items: center; /* ูุญุงุฐุงุชูู ุนููุฏููุง */  
    gap: 6px; /* ูุณุงูุฉ 6 ุจูุณู ุจูููู */  
}

.search-container input { /* ุฅุนุฏุงุฏ ุญูู ุงูุฅุฏุฎุงู ููุจุญุซ */  
    width: 300px; /* ุนุฑุถ ุงูุญูู 300 ุจูุณู */  
    padding: 7px 77px; /* ุญุดู ุฏุงุฎูู: 7 ุจูุณู ุนููุฏูุ 77 ุจูุณู ุฃููู */  
    font-size: 15px; /* ุญุฌู ุฎุท 15 ุจูุณู */  
    border-radius: 6px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุญูู */  
    border: 1px solid #ccc; /* ุฅุทุงุฑ ุฑูุงุฏู ูุงุชุญ ุฑููุน */  
}

.search-container button { /* ุฅุนุฏุงุฏ ุฒุฑ ุงูุจุญุซ */  
    padding: 8px 16px; /* ุญุดู ุฏุงุฎูู: 8 ุจูุณู ุนููุฏูุ 16 ุจูุณู ุฃููู */  
    background-color: #007bff; /* ุฎูููุฉ ุฒุฑูุงุก */  
    border: none; /* ุฅุฒุงูุฉ ุงูุญุฏูุฏ */  
    color: white; /* ููู ุงููุต ุฃุจูุถ */  
    border-radius: 6px; /* ุชุฏููุฑ ุฒูุงูุง ุงูุฒุฑ */  
    cursor: pointer; /* ุชุบููุฑ ุงููุคุดุฑ ุฅูู ูุฏ */  
    font-weight: bold; /* ุฌุนู ุงููุต ุนุฑูุถูุง */  
}

.logo img { /* ุฅุนุฏุงุฏ ุตูุฑุฉ ุงูุดุนุงุฑ ุฏุงุฎู ุงูุดุฑูุท */  
    width: 45px; /* ุนุฑุถ ุงูุดุนุงุฑ 45 ุจูุณู */  
    cursor: pointer; /* ุชุบููุฑ ุงููุคุดุฑ ุฅูู ูุฏ ุนูุฏ ุงููุฑูุฑ ููููุง */  
}

#visitTwitter:hover { /* ุชุฃุซูุฑ ุนูุฏ ุชูุฑูุฑ ุงููุงูุณ ุนูู ุฒุฑ ุชููุชุฑ */  
    box-shadow: 0 0 15px #007bff, 0 0 25px #007bff; /* ุชููุฌ ุฃุฒุฑู ุญูู ุงูุฒุฑ */  
}
        </style>
        <style>
            .search-container input { /* ุชููุฆุฉ ุญูู ุงูุจุญุซ */
                width: 300px; /* ุชุญุฏูุฏ ุนุฑุถ ูุฑุจุน ุงูุจุญุซ ุจู 300 ุจูุณู */
                padding: 7px 12px; /* ุฅุถุงูุฉ ุญุดู ุฏุงุฎูู: 7 ุจูุณู ููู ูุชุญุชุ 12 ุจูุณู ูููู ููุณุงุฑ */
                font-size: 15px; /* ุชุญุฏูุฏ ุญุฌู ุงูุฎุท ุฏุงุฎู ูุฑุจุน ุงูุจุญุซ */
                border-radius: 6px; /* ุชุฏููุฑ ุฒูุงูุง ูุฑุจุน ุงูุจุญุซ ุจููุฏุงุฑ 6 ุจูุณู */
                border: 1px solid #ccc; /* ุฅุถุงูุฉ ุฅุทุงุฑ ุฑููุน ุจููู ุฑูุงุฏู ูุงุชุญ */
            }
        
            /* โ ุชูุณูู ูุงุฆูุฉ ุงูุงูุชุฑุงุญุงุช */
            #suggestionsList { /* ุชููุฆุฉ ูุงุฆูุฉ ุงูุงูุชุฑุงุญุงุช ุงูููุจุซูุฉ */
                position: absolute; /* ุชุญุฏูุฏ ูุถุน ุงููุงุฆูุฉ ุจุดูู ูุทูู ุจุงููุณุจุฉ ููุญุงููุฉ */
                top: 100%; /* ูุถุน ุงููุงุฆูุฉ ุฃุณูู ุญูู ุงูุจุญุซ ูุจุงุดุฑุฉ */
                right: 0; /* ูุญุงุฐุงุฉ ุงููุงุฆูุฉ ุฅูู ุงููููู */
                width: 600px; /* ุฌุนู ุนุฑุถ ุงููุงุฆูุฉ ูุณุงูู ูุนุฑุถ ูุฑุจุน ุงูุจุญุซ */
                max-height: 250px; /* ุชุญุฏูุฏ ุฃูุตู ุงุฑุชูุงุน ูุน ุชูุนูู ุงูุชูุฑูุฑ */
                background: white; /* ุชุนููู ุฎูููุฉ ุจูุถุงุก ูููุงุฆูุฉ */
                border: 1px solid #ccc; /* ุฅุถุงูุฉ ุฅุทุงุฑ ุฑูุงุฏู ูุงุชุญ ุญูููุง */
                overflow-y: auto; /* ุชูุนูู ุงูุชูุฑูุฑ ุงูุฑุฃุณู ุนูุฏ ุฒูุงุฏุฉ ุงููุญุชูู */
                padding: 0; /* ุฅุฒุงูุฉ ุงูุญุดู ุงูุงูุชุฑุงุถู ูููุงุฆูุฉ */
                margin: 2px 0 0; /* ูุถุน ูุณุงูุฉ 2 ุจูุณู ููู ุงููุงุฆูุฉ ููุตู ุนู ุงูุนูุงุตุฑ ุฃุณูู */
                list-style: none; /* ุฅุฒุงูุฉ ุนูุงูุงุช ุงูููุท ูู ุงููุงุฆูุฉ */
                border-radius: 0 0 6px 6px; /* ุชุฏููุฑ ุงูุฒูุงูุง ุงูุณูููุฉ ุจููุฏุงุฑ 6 ุจูุณู */
                z-index: 3000; /* ุฑูุน ุงููุงุฆูุฉ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
            }
        
            /* โ ุชูุณูู ุงูุนูุงุตุฑ ุฏุงุฎู ูุงุฆูุฉ ุงูุงูุชุฑุงุญุงุช */
            #suggestionsList li { /* ุชููุฆุฉ ูู ุนูุตุฑ ุงูุชุฑุงุญ */
                padding: 10px 12px; /* ุญุดู ุฏุงุฎูู ูุชูููุฑ ูุณุงุญุฉ ูุฑูุญุฉ ูููุต */
                cursor: pointer; /* ุชุบููุฑ ุงููุคุดุฑ ูููุฏ ุนูุฏ ุงููุฑูุฑ */
                font-size: 15px; /* ุฌุนู ุญุฌู ุงูุฎุท ูุทุงุจููุง ูุญุฌู ุญูู ุงูุจุญุซ */
                border-bottom: 1px solid #eee; /* ุฅุถุงูุฉ ุฎุท ูุงุตู ุฎููู ุจูู ุงูุนูุงุตุฑ */
            }
        
            /* โ ุชุฃุซูุฑ ุนูุฏ ุงููุฑูุฑ ุฃู ุงูุชุญุฏูุฏ */
            #suggestionsList li:hover,
            #suggestionsList li.highlight { /* ุนูุฏ ุงููุฑูุฑ ุฃู ูุฌูุฏ ุงูุตูู "highlight" */
                background-color: #007bff; /* ุชุบููุฑ ุงูุฎูููุฉ ุฅูู ุฃุฒุฑู */
                color: white; /* ุฌุนู ุงููุต ุฃุจูุถ ูุชุจุงูู ุฌูุฏ */
            }
        </style>
        
        <style>
            /* โ ุชุนุฑูู ุญุฑูุฉ ุงูุฏูุฑุงู */
            @keyframes spin { /* ุฅูุดุงุก ุฃููููุดู ุจุงุณู spin */
                0%   { transform: rotate(0deg); } /* ุจุฏุงูุฉ ุงูุญุฑูุฉ ุจุฏูู ุฏูุฑุงู */
                100% { transform: rotate(360deg); } /* ููุงูุฉ ุงูุญุฑูุฉ ุจุฏูุฑุงู ูุงูู */
            }
        </style>
        
        </head>
        
        <!-- โ ุดุงุดุฉ ุงูุชุญููู -->
        <div id="loadingScreen" style="
            position: fixed; /* ุชุซุจูุช ุงูุดุงุดุฉ ููู ูู ุงููุญุชูู */
            top: 0; /* ูู ุฃุนูู ุงููุงูุฐุฉ */
            left: 0; /* ูู ุงููุณุงุฑ */
            width: 100%; /* ุนุฑุถ ูุงูู ุงูุดุงุดุฉ */
            height: 100%; /* ุงุฑุชูุงุน ูุงูู ุงูุดุงุดุฉ */
            background: linear-gradient(to bottom right, #007bff, #66b3ff); /* ุชุฏุฑุฌ ูููู ุฃุฒุฑู ุฌุฐุงุจ */
            display: flex; /* ุงุณุชุฎุฏุงู Flexbox ูุชุฑุชูุจ ุงููุญุชููุงุช */
            flex-direction: column; /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏููุง */
            justify-content: center; /* ุชูุณูุท ุนููุฏู ููุนูุงุตุฑ */
            align-items: center; /* ุชูุณูุท ุฃููู ููุนูุงุตุฑ */
            z-index: 3000; /* ูุถุน ุงูุดุงุดุฉ ููู ุจุงูู ุงูุนูุงุตุฑ */
        ">
            <img src="/images/ุดุนุงุฑ_ุฌุงูุนุฉ_ุงูุทุงุฆู_ุงูุณุนูุฏูุฉ.jpg" alt="ุดุนุงุฑ ุงูุฌุงูุนุฉ" style="
                width: 720px; /* ุชุญุฏูุฏ ุนุฑุถ ุงูุดุนุงุฑ */
                max-width: 80%; /* ุฌุนู ุนุฑุถู ูุง ูุชุฌุงูุฒ 80% ูู ุงูุดุงุดุฉ */
                border-radius: 20px; /* ุชุฏููุฑ ุฒูุงูุงู ุจููุฏุงุฑ 20 ุจูุณู */
                box-shadow: 0 4px 20px rgba(0,0,0,0.3); /* ุฅุถุงูุฉ ุธู ุฎููู ุญูู ุงูุดุนุงุฑ */
                margin-bottom: 30px; /* ูุณุงูุฉ ุฃุณูู ุงูุดุนุงุฑ */
            ">
        
            <div style="display: flex; align-items: center; gap: 12px;"> <!-- ุญุงููุฉ ูููุต ูุงููุคุดุฑ ุงูุฏูุงุฑ -->
                <span style="font-size: 22px; font-weight: bold; color: white;">
                    ุฌุงุฑู ุงูุชุญููู... <!-- ูุต ุฑุณุงูุฉ ุงูุชุญููู -->
                </span>
                <div class="spinner" style="
                    width: 28px; /* ุนุฑุถ ุงูุนูุตุฑ ุงูุฏูุงุฑ */
                    height: 28px; /* ุงุฑุชูุงุน ุงูุนูุตุฑ ุงูุฏูุงุฑ */
                    border: 4px solid white; /* ุฅุทุงุฑ ุฃุจูุถ ูุงูู */
                    border-top: 4px solid transparent; /* ุฌุนู ุงูุฌุฒุก ุงูุนููู ุดูุงููุง ูุฅุธูุงุฑ ุงูุญุฑูุฉ */
                    border-radius: 50%; /* ุชุญููู ุงูุนูุตุฑ ุฅูู ุฏุงุฆุฑุฉ ูุงููุฉ */
                    animation: spin 1s linear infinite; /* ุชุดุบูู ุฃููููุดู spin ุจุดูู ูุณุชูุฑ */
                ">
                </div>
            </div>
        </div>
        

<!-- โ ุณูุฑุจุช ุดุงุดุฉ ุงูุชุญููู + ุชุญุฏูุฏ ุงููููุน ุจุนุฏ 5 ุซูุงูู -->
<script>
window.addEventListener('load', function() {
    // ููุชุธุฑ 5 ุซูุงูู ูุดุงุดุฉ ุงูุชุญููู
    setTimeout(function() {
        // ุฅุฎูุงุก ุดุงุดุฉ ุงูุชุญููู
        document.getElementById('loadingScreen').style.display = 'none';

        // ุซู ูุณุฃู ุงููุณุชุฎุฏู ุนู ุชุญุฏูุฏ ุงููููุน
        if (confirm('๐ ูู ุชุฑูุฏ ุชุญุฏูุฏ ูููุนู ูุนุฑุถู ุนูู ุงูุฎุฑูุทุฉุ')) {
            if (!navigator.geolocation) {
                alert('ุงููุชุตูุญ ูุง ูุฏุนู ุชุญุฏูุฏ ุงููููุน ุงูุฌุบุฑุงูู.');
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function (position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;

                    // ุฅุถุงูุฉ ูุงุฑูุฑ ุนูู ุงูุฎุฑูุทุฉ ุจุงุณุชุฎุฏุงู Leaflet
                    const userMarker = L.marker([lat, lng], {
                        icon: L.icon({
                            iconUrl: 'https://cdn-icons-png.flaticon.com/512/64/64113.png',
                            iconSize: [40, 40],
                            iconAnchor: [20, 40]
                        })
                    }).addTo(map).bindPopup('๐ ูููุนู ุงูุญุงูู').openPopup();

                    // ุชุญุฑูู ุงูุฎุฑูุทุฉ ุฅูู ุงููููุน
                    map.setView([lat, lng], 16);
                },
                function (error) {
                    alert('ุชุนุฐุฑ ุชุญุฏูุฏ ูููุนู: ' + error.message);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        } else {
            console.log('ุงููุณุชุฎุฏู ุฑูุถ ุชุญุฏูุฏ ุงููููุน.');
        }
    }, 5000); // โ ููุง ุงููุฏุฉ 5 ุซูุงูู ุจุฏู 4
});
</script>


<!-- โ ุงูุดุฑูุท ุงูุนููู -->
<div class="topbar">
    <div class="logo" style="display: flex; align-items: center;">
        <img src="/images/ุดุนุงุฑ_ุฌุงูุนุฉ_ุงูุทุงุฆู_ุงูุณุนูุฏูุฉ.png" alt="ุดุนุงุฑ" onclick="showWelcomeVideo()" style="width: 120px; height: auto;">

    </div>
<!-- โ ูุงูุฐุฉ ุงูููุฏูู ุงูููุจุซูุฉ -->
<div id="videoPopup" style="
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #fff;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    z-index: 9999;
    text-align: center;
    max-width: 90%;
    max-height: 90%;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
">
    <h2 style="margin-bottom: 10px;">ุฌุงูุนุฉ ุงูุทุงุฆู ุชุฑุญุจ ุจูู</h2>

    <div id="videoFrameContainer"></div>

    <br>
    <button onclick="closeWelcomeVideo()" style="margin-top: 10px;">ุฅุบูุงู</button>
</div>

<script>
    window.addEventListener('load', function() {
        setTimeout(function() {
            document.getElementById('loadingScreen').style.display = 'none';
        }, 4000); // 4000ms = 4 ุซูุงูู
    });
    </script>
    
<!-- โ ุณูุฑุจุช ุชุดุบูู ุงูููุฏูู -->
<script>
    const driveEmbedUrl = "https://drive.google.com/file/d/15ITjpqr7mY9kWqImi5LtkGyIKSDfPxeh/preview";

    function showWelcomeVideo() {
        const popup = document.getElementById("videoPopup");
        const container = document.getElementById("videoFrameContainer");

        // ุฅุฏุฑุงุฌ ุงูููุฏูู ููุท ุนูุฏ ุงููุชุญ
        container.innerHTML = `
            <iframe id="welcomeVideo"
                    src="${driveEmbedUrl}"
                    width="640" height="360"
                    allow="autoplay" allowfullscreen
                    style="border: none; border-radius: 10px;">
            </iframe>
        `;

        popup.style.display = "block";
        setTimeout(() => {
            popup.style.opacity = "1";
        }, 10);
    }

    function closeWelcomeVideo() {
        const popup = document.getElementById("videoPopup");
        const container = document.getElementById("videoFrameContainer");

        popup.style.opacity = "0";
        setTimeout(() => {
            popup.style.display = "none";
            container.innerHTML = ""; // ุชูุธูู ูุฅููุงู ุงูููุฏูู
        }, 400);
    }

    // โ ุฑุจุท ุงูุถุบุท ุนูู ุงูุดุนุงุฑ ูุน ุฅุธูุงุฑ ุงูููุฏูู
    document.getElementById("universityLogo").addEventListener("click", showWelcomeVideo);
</script>
<div class="search-container" style="position: relative; display: flex; align-items: center; width: 600px;">
    <button id="searchButton" style="margin-left: 5px;">ุจุญุซ</button>
    <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุงููุจูู..." style="flex: 1;" />
    <ul id="suggestionsList" style="display: none;"></ul>
</div>


    

    <div class="language-switch">
        <button onclick="setLanguage('ar')">ุนุฑุจู</button>
        <span>|</span>
        <button onclick="setLanguage('en')">English</button>
    </div>
</div>
<body>
<!-- โ ููุชุฑ SVG ููุชููุฌ -->
<svg height="0" width="0">
    <filter id="glow-filter" x="-50%" y="-50%" width="200%" height="200%">
        <feGaussianBlur stdDeviation="3.5" result="coloredBlur"/>
        <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
        </feMerge>
    </filter>
</svg>

<!-- โ ุงูุฎุฑูุทุฉ -->
<div id="map" style="position: absolute; top: 60px; left: 330px; right: 0; bottom: 0; z-index: 0;"></div>
<div id="loadingMessage" style="position: absolute; top: 70px; left: 340px; color: black;">ุฌุงุฑู ุชุญููู ุงูุฎุฑูุทุฉ...</div>

<!-- โ ุงูุดุฑูุท ุงูุฌุงูุจู ุงูุฑุฆูุณู -->
<div class="sidebar" style="position: fixed; top: 60px; left: 0; width: 80px; height: calc(100vh - 60px); background-color: black; color: white; border-right: 1px solid #333; z-index: 1000; display: flex; flex-direction: column; align-items: center; padding-top: 10px;">
    <div class="icon" onclick="toggleSubSidebar('explore')" style="margin-bottom: 20px; text-align: center;">
        <img src="/images/explore-icon.png" alt="ุงุณุชูุดุงู" style="width: 40px;">
        <span data-key="explore" style="display: block; font-size: 12px;">ุงุณุชูุดุงู</span>
    </div>
    <div class="icon" onclick="toggleSubSidebar('places')" style="margin-bottom: 20px; text-align: center;">
        <img src="/images/location-icon.png" alt="ุฃูุงููู" style="width: 40px;">
        <span data-key="places" style="display: block; font-size: 12px;">ุฃูุงููู</span>
    </div>
    <div class="icon" onclick="toggleSubSidebar('directions')" style="margin-bottom: 20px; text-align: center;">
        <img src="/images/directions-icon.png" alt="ุงูุงุชุฌุงูุงุช" style="width: 40px;">
        <span data-key="directions" style="display: block; font-size: 12px;">ุงูุงุชุฌุงูุงุช</span>
    </div>
    <div class="icon" onclick="toggleSubSidebar('events')" style="margin-bottom: 20px; text-align: center;">
        <img src="/images/events-icon.png" alt="ุงูุฃุญุฏุงุซ" style="width: 40px;">
        <span data-key="events" style="display: block; font-size: 12px;">ุงูุฃุญุฏุงุซ</span>
    </div>
    <div class="icon alert-icon" onclick="showMessage()" style="margin-top: auto; margin-bottom: 10px; text-align: center;">
        <img src="/images/light-bulb.png" alt="ุชุนุฌุจ" style="width: 40px;">
    </div>
</div>

<!-- โ ุงูุดุฑุงุฆุท ุงูุฌุงูุจูุฉ ุงููุฑุนูุฉ -->

<div id="explore" class="sub-sidebar" style="position: fixed; top: 60px; left: 80px; width: 250px; height: calc(100vh - 60px); background-color: white; color: black; border-right: 1px solid #ddd; overflow-y: auto; display: none; padding: 10px;">
    <h3 data-key="explore" style="color: black;">ุงุณุชูุดุงู</h3>
    <ul class="category-list" style="list-style: none; padding: 0;">
        <li onclick="showCategory('college')"><img src="/images/33.png" style="width: 20px;"> <span data-key="college">ุงููููุงุช</span></li>
        <li onclick="showCategory('admin')"><img src="/images/77.png" style="width: 20px;"> <span data-key="admin">ุงูุฅุฏุงุฑุฉ</span></li>
        <li onclick="showCategory('medical')"><img src="/images/44.png" style="width: 20px;"> <span data-key="medical">ุงูุฅุฏุงุฑุฉ ุงูุทุจูุฉ</span></li>
        <li onclick="showCategory('library')"><img src="/images/55.png" style="width: 20px;"> <span data-key="library">ุงูููุชุจุฉ</span></li>
        <li onclick="showCategory('mosque')"><img src="/images/11.png" style="width: 20px;"> <span data-key="mosque">ุงููุณุงุฌุฏ</span></li>
        <li onclick="showCategory('restaurant')"><img src="/images/22.png" style="width: 20px;"> <span data-key="restaurant">ุงููุทุงุนู</span></li>
    </ul>
</div>

<div id="places" class="sub-sidebar" style="position: fixed; top: 60px; left: 80px; width: 250px; height: calc(100vh - 60px); background-color: white; color: black; border-right: 1px solid #ddd; overflow-y: auto; display: none; padding: 10px;">
    <h3 data-key="places" style="color: black;">ุฃูุงููู</h3>

    <div id="placesContent"></div>
</div>

<div id="directions" class="sub-sidebar" style="position: fixed; top: 60px; left: 80px; width: 250px; height: calc(100vh - 60px); background-color: white; color: black; border-right: 1px solid #ddd; overflow-y: auto; display: none; padding: 10px;">
    <h3 data-key="directions" style="color: black;">ุงูุงุชุฌุงูุงุช</h3>

    <div style="display: flex; flex-direction: column; gap: 10px;">
        <button id="startButton" onclick="setStartPoint()" class="direction-button" data-key="setStart" style="padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 5px;">
            ๐ ุชุญุฏูุฏ ููุทุฉ ุงูุจุฏุงูุฉ
        </button>

        <button id="endButton" onclick="setEndPoint()" class="direction-button" data-key="setEnd" style="padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 5px;">
            ๐ฏ ุชุญุฏูุฏ ููุทุฉ ุงูููุงูุฉ
        </button>

        <button id="resetButton" onclick="resetRoute()" class="direction-button" data-key="reset" style="padding: 10px; background-color: #dc3545; color: white; border: none; border-radius: 5px;">
            ๐ ุฅุนุงุฏุฉ ุชุนููู
        </button>

        <div id="distanceInfo" data-key="distanceInfo" style="margin-top: 20px; padding: 12px; border: 2px dashed #007bff; border-radius: 10px; text-align: center; font-weight: bold;">
            ุงููุณุงูุฉ ุณุชุธูุฑ ููุง ุจุนุฏ ุชุญุฏูุฏ ุงูููุทุชูู...
        </div>
    </div>
</div>


<div id="events" class="sub-sidebar" style="position: fixed; top: 60px; left: 80px; width: 250px; height: calc(100vh - 60px); background-color: white; color: black; border-right: 1px solid #ddd; overflow-y: auto; display: none; padding: 10px;">
    <h3 id="eventsTitle" data-key="events" style="color: black;">
        ุงูุฃุญุฏุงุซ
    </h3>

    <div class="events-content">
        <p id="eventsInfo" data-key="eventsInfo" style="color: black; text-align: center;">
            ูุฑุคูุฉ ุงูุฃุญุฏุงุซ ูุขุฎุฑ ุงูุชุญุฏูุซุงุชุ ูู ุจุฒูุงุฑุฉ ุตูุญุฉ ุชููุชุฑ ุงูุฑุณููุฉ:
        </p>

        <a id="visitTwitter" data-key="visitTwitter" href="https://x.com/TaifUniversity" target="_blank"
           style="background-color: #007bff; color: white; padding: 10px 20px;
                  text-decoration: none; border-radius: 8px; display: inline-block;
                  font-weight: bold; transition: box-shadow 0.3s ease;">
            ุฒูุงุฑุฉ ุชููุชุฑ
        </a>
    </div>
</div>


<!-- โ ุฑุณุงูุฉ ููุชุตู ุงูุดุงุดุฉ -->
<div id="messageBox" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.2); z-index: 2000;">
    <p id="messageText" style="margin: 0; color: black;">ุฎุฑูุทุฉ ุชูุงุนููุฉ ูุฌุงูุนุฉ ุงูุทุงุฆู!</p>
    <button onclick="closeMessage()" style="margin-top: 10px;">ุฅุบูุงู</button>
</div>

<script>
    // ๐ต ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุนูููุงุช ุงูุจุญุซ ุงููุญููุธุฉ
    const maxHistory = 5;
    
    // ๐ต ุฏุงูุฉ ูุญูุธ ุงูุจุญุซ ูู localStorage
    function saveSearch(query) {
        if (!query) return;
    
        let searchHistory = JSON.parse(localStorage.getItem("searchHistory")) || [];
    
        if (!searchHistory.includes(query)) {
            searchHistory.unshift(query);
        }
    
        if (searchHistory.length > maxHistory) {
            searchHistory.pop();
        }
    
        localStorage.setItem("searchHistory", JSON.stringify(searchHistory));
    }
    
    // ๐ต ุฏุงูุฉ ุชูููุฐ ุงูุจุญุซ ุงููุจุงุดุฑ ูู ุงูุถุบุท ุนูู ุนูุตุฑ
    function searchFromHistory(name) {
        const input = document.getElementById("searchInput");
        if (input) {
            input.value = name;
            searchBuilding(); // ๐ฅ ุงุณุชุฏุนุงุก ุฏุงูุฉ ุงูุจุญุซ ูุจุงุดุฑุฉ
        }
    }
    
    // ๐ต ุฏุงูุฉ ุนุฑุถ ุนูููุงุช ุงูุจุญุซ ุฏุงุฎู ุฃูุงููู
    function displaySearchHistory() {
        const searchHistory = JSON.parse(localStorage.getItem("searchHistory")) || [];
        const placesContent = document.getElementById("placesContent");
    
        if (!placesContent) return;
    
        const lang = document.documentElement.lang || 'ar';
        const t = translations[lang] || {};
    
        if (searchHistory.length === 0) {
            placesContent.innerHTML = `<p style="text-align:center; color:gray;">${t.noSearches || "ูุง ุชูุฌุฏ ุนูููุงุช ุจุญุซ ุณุงุจูุฉ."}</p>`;
        } else {
            const ul = document.createElement('ul');
            ul.style.listStyle = 'none';
            ul.style.padding = '0';
    
            searchHistory.slice().reverse().forEach(query => {
                const loweredQuery = query.toLowerCase().trim();
    
                const match = buildings.find(b =>
                    (b.name && b.name.toLowerCase().includes(loweredQuery)) ||
                    (b.enName && b.enName.toLowerCase().includes(loweredQuery))
                );
    
                const displayName = match ? (lang === 'ar' ? match.name : (match.enName || match.name)) : query;
    
                const li = document.createElement('li');
                li.textContent = displayName;
                li.style.padding = '8px';
                li.style.marginBottom = '5px';
                li.style.background = '#f0f0f0';
                li.style.borderRadius = '5px';
                li.style.textAlign = 'center';
                li.style.fontWeight = 'bold';
                li.style.cursor = 'pointer';
                li.style.transition = '0.3s'; // โ ุงูุชูุงู ุณูุณ ููุชููุฌ
    
                // ุนูุฏ ุชูุฑูุฑ ุงููุฃุฑุฉ โ ุฅุถุงูุฉ ุชุฃุซูุฑ ุงูุชููุฌ
                li.addEventListener('mouseover', () => {
                    li.style.boxShadow = '0 0 10px #007bff'; // ๐ต ุชููุฌ ุฃุฒุฑู ุฎููู
                    li.style.background = '#e0eaff'; // ุชุบููุฑ ููู ุงูุฎูููุฉ ูุน ุงูุชููุฌ
                });
    
                li.addEventListener('mouseout', () => {
                    li.style.boxShadow = 'none';
                    li.style.background = '#f0f0f0'; // ูุฑุฌุน ูููู ุงูุทุจูุนู
                });
    
                li.addEventListener('click', () => {
                    searchFromHistory(displayName);
                });
    
                ul.appendChild(li);
            });
    
            placesContent.innerHTML = `
                <h3 style="text-align:center;">${t.searchTitle || "ุขุฎุฑ ุนูููุงุช ุงูุจุญุซ"}:</h3>
            `;
            placesContent.appendChild(ul);
        }
    }
    
    // ๐ต ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุจุญุซ ุฃู ุฒุฑ ุฅูุชุฑ
    function handleSearch() {
        const input = document.getElementById("searchInput").value.trim();
        if (input) {
            saveSearch(input);
            searchBuilding();
            displaySearchHistory();
        } else {
            alert("ูุฑุฌู ุฅุฏุฎุงู ูุต ููุจุญุซ.");
        }
    }
    
    // ุฒุฑ ุงูุจุญุซ
    document.getElementById("searchButton").addEventListener("click", handleSearch);
    
    // ุฒุฑ Enter ูู ุญูู ุงูุฅุฏุฎุงู
    document.getElementById("searchInput").addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            handleSearch();
        }
    });
    
    // ๐ต ุนูุฏ ูุชุญ ูุณู ุฃูุงููู ูุชู ุชุญุฏูุซ ุงูุนุฑุถ
    const placesIcon = document.querySelector(".icon[onclick*='places']");
    if (placesIcon) {
        placesIcon.addEventListener("click", displaySearchHistory);
    }
    </script>
    

<script src="/buildings-data.js"></script> <!-- ุชุฃูุฏ ูู ุชุญููู ููู ุงููุจุงูู ููุง -->
<script>
    function showCategory(category) {
        if (!buildingLayers || buildingLayers.length === 0) {
            alert("ุงูุฎุฑูุทุฉ ูู ุชูุชูู ุจุนุฏ.");
            return;
        }
    
        // ุชุญุฏูุฏ ุงููุบุฉ ุงูุญุงููุฉ ุจูุงุกู ุนูู ุงุชุฌุงู ุงูุตูุญุฉ (dir)
        const isArabic = document.documentElement.getAttribute("dir") === "rtl";
    
        // ุงููููุงุช ุญุณุจ ุงูุชุตููู ูุงููุบุฉ
        const categories = {
            college: {
                ar: ["ูููุฉ"],
                en: ["College"]
            },
            admin: {
                ar: ["ุงูุฅุฏุงุฑุฉ"],
                en: ["Administration"]
            },
            medical: {
                ar: ["ุงูุฅุฏุงุฑุฉ ุงูุทุจูุฉ"],
                en: ["Medical Administration", "Medical Admin"]
            },
            library: {
                ar: ["ููุชุจุฉ", "ุงูููุชุจุงุช"],
                en: ["Library", "Libraries"]
            },
            mosque: {
                ar: ["ูุณุฌุฏ", "ุงููุณุงุฌุฏ"],
                en: ["Mosque", "Mosques"]
            },
            restaurant: {
                ar: ["ูุทุนู", "ุงููุทุนู"],
                en: ["Restaurant"]
            }
        };
    
        // ุญุฏุฏ ุงููููุงุช ุจูุงุกู ุนูู ุงูุชุตููู ูุงููุบุฉ
        const keywords = categories[category] ? (isArabic ? categories[category].ar : categories[category].en) : [];
    
        if (keywords.length === 0) {
            return; // ูุง ุดูุก ููุจุญุซ
        }
    
        let found = false;
    
        buildingLayers.forEach(obj => {
            const name = (obj.feature.name || "").toLowerCase();
    
            if (keywords.some(kw => name.includes(kw.toLowerCase()))) {
                if (obj.layer && obj.layer.bindPopup) {
                    obj.layer.bindPopup(obj.feature.name).openPopup();
                }
    
                const path = obj.layer.getElement && obj.layer.getElement();
                if (path) {
                    path.classList.add('glow-path');
                    obj.layer.setStyle({ weight: 5 });
                    setTimeout(() => {
                        path.classList.remove('glow-path');
                        obj.layer.setStyle(obj.originalStyle);
                    }, 3000);
                }
                found = true;
            }
        });
    
        if (!found) {
            alert(isArabic ? 'ูุง ุชูุฌุฏ ูุจุงูู ูุทุงุจูุฉ.' : 'No matching buildings found.');
        }
    }
    </script>
    
    <script>
        function resetRoute() {
            // ุฅุฒุงูุฉ ุงูุฏุจุงุจูุณ ุฅู ูุฌุฏุช
            if (startMarker) {
                map.removeLayer(startMarker);
                startMarker = null;
            }
            if (endMarker) {
                map.removeLayer(endMarker);
                endMarker = null;
            }
        
            // ุฅุฒุงูุฉ ุงูุฎุท ุฅู ูุฌุฏ
            if (routeLine) {
                map.removeLayer(routeLine);
                routeLine = null;
            }
        
            // ุชุตููุฑ ุงููุณุงูุฉ
            document.getElementById('distanceInfo').innerText = "ุงููุณุงูุฉ ุณุชุธูุฑ ููุง ุจุนุฏ ุชุญุฏูุฏ ุงูููุทุชูู...";
        }
        </script>
        
    
<!-- โ ุจูุจ ุงุจ ูุชูุงุตูู ุงูุฑูู -->
<div id="numberPopup" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
background:white; padding:20px; border-radius:12px; box-shadow:0 0 30px rgba(0,0,0,0.4); z-index:9999;
text-align:center; font-size:18px; min-width:250px;">
    <div id="popupContent"></div>
    <button onclick="closePopup()" style="margin-top:10px; padding:5px 20px; border:none; border-radius:8px; background:#007bff; color:white; cursor:pointer;">ููุงูู</button>
</div>
<script>
    let startMarker = null;
    let endMarker = null;
    let routeLine = null;
    
    // ุฏุงูุฉ ุฅูุดุงุก ูุงุฑูุฑ draggable
    function createDraggableMarker(latlng, color) {
        return L.marker(latlng, {
            draggable: true,
            icon: L.icon({
                iconUrl: `https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|${color}`,
                iconSize: [30, 50],
                iconAnchor: [15, 50],
            })
        }).addTo(map);
    }
    
    // โ ุฏุงูุฉ ุชุญุฏูุฏ ููุทุฉ ุงูุจุฏุงูุฉ ุจุฏูู ุฑุณุงูุฉ
    function setStartPoint() {
        map.getContainer().classList.add('cursor-pin'); // ุชุบููุฑ ุดูู ุงููุงูุณ ููุท
    
        map.once('click', function(e) {
            if (startMarker) map.removeLayer(startMarker);
    
            startMarker = createDraggableMarker(e.latlng, '28a745'); // ุฏุจูุณ ุฃุฎุถุฑ
            startMarker.on('dragend', updateRoute);
    
            map.getContainer().classList.remove('cursor-pin'); // ุฑุฌุน ุงููุงูุณ ุทุจูุนู
            updateRoute();
        });
    }
    
    // โ ุฏุงูุฉ ุชุญุฏูุฏ ููุทุฉ ุงูููุงูุฉ ุจุฏูู ุฑุณุงูุฉ
    function setEndPoint() {
        map.getContainer().classList.add('cursor-pin'); // ุชุบููุฑ ุดูู ุงููุงูุณ ููุท
    
        map.once('click', function(e) {
            if (endMarker) map.removeLayer(endMarker);
    
            endMarker = createDraggableMarker(e.latlng, 'dc3545'); // ุฏุจูุณ ุฃุญูุฑ
            endMarker.on('dragend', updateRoute);
    
            map.getContainer().classList.remove('cursor-pin'); // ุฑุฌุน ุงููุงูุณ ุทุจูุนู
            updateRoute();
        });
    }
    
    // โ ุฏุงูุฉ ุฑุณู ุงูุฎุท ูุญุณุงุจ ุงููุณุงูุฉ
    function updateRoute() {
        if (startMarker && endMarker) {
            const startLatLng = startMarker.getLatLng();
            const endLatLng = endMarker.getLatLng();
    
            // ุญุฐู ุงูุฎุท ุงููุฏูู ูู ููุฌูุฏ
            if (routeLine) {
                map.removeLayer(routeLine);
            }
    
            // ุฑุณู ุฎุท ุฌุฏูุฏ
            routeLine = L.polyline([startLatLng, endLatLng], {color: 'blue', weight: 5}).addTo(map);
    
            // ุญุณุงุจ ุงููุณุงูุฉ
            const distance = map.distance(startLatLng, endLatLng);
            const distanceText = (distance > 1000)
                ? (distance / 1000).toFixed(2) + " ูู"
                : Math.round(distance) + " ูุชุฑ";
    
            // ุนุฑุถ ุงููุณุงูุฉ
            document.getElementById('distanceInfo').innerText = `ุงููุณุงูุฉ ุจูู ุงูููุทุชูู: ${distanceText}`;
    
            // ุชูุณูุท ุงูุฎุฑูุทุฉ ุนูู ุงููุณุงุฑ
            map.fitBounds(routeLine.getBounds(), {padding: [50, 50]});
        }
    }
    </script>
    
    
    <script>
        let buildingLayers = [];
        
        // ุชุญููู ุฎุฑูุทุฉ GeoJSON
        fetch('tu_map_force_colored.geojson')
            .then(res => res.json())
            .then(data => {
                L.geoJSON(data, {
                    filter: function(feature) {
                        // โ ุชุฌุงูู ุงูููุงุท (Point) ููุง ุชุฑุณู ุฅูุง ุงููุจุงูู (Polygon/MultiPolygon)
                        return feature.geometry.type !== 'Point';
                    },
                    style: function(feature) {
                        const props = feature.properties || {};
        
                        if (props.name === "ุฌุงูุนู ุงูุทุงุฆู - ุทูุงุจ") {
                            return {
                                color: "blue",
                                opacity: 1,
                                weight: 3,
                                stroke: true,
                                fill: false,
                                fillColor: "transparent",
                                fillOpacity: 0
                            };
                        }
        
                        return {
                            color: props.borderColor || "#888",
                            weight: 2,
                            fillColor: props.fillColor || "#888",
                            fillOpacity: 0.4
                        };
                    },
                    onEachFeature: function(feature, layer) {
                        const props = feature.properties || {};
        
                        if (props.name) {
                            layer.bindPopup(props.name);
                        }
        
                        buildingLayers.push({
                            layer: layer,
                            feature: props,
                            originalStyle: {
                                weight: layer.options.weight,
                                color: layer.options.color,
                                fillColor: layer.options.fillColor,
                                fillOpacity: layer.options.fillOpacity,
                                opacity: layer.options.opacity
                            }
                        });
        
                        layer.on('mouseover', function() {
                            const path = layer.getElement && layer.getElement();
                            if (path) {
                                path.classList.add('glow-path');
                                const original = buildingLayers.find(b => b.layer === layer).originalStyle;
                                layer.setStyle({ 
                                    weight: 8, 
                                    color: original.color 
                                });
                            }
                        });
        
                        layer.on('mouseout', function() {
                            const path = layer.getElement && layer.getElement();
                            if (path) {
                                path.classList.remove('glow-path');
                                const original = buildingLayers.find(b => b.layer === layer).originalStyle;
                                layer.setStyle(original);
                            }
                        });
                    }
                }).addTo(map);
        
                loadingMessage.style.display = 'none';
            })
            .catch(error => {
                loadingMessage.innerHTML = 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช';
                console.error('GeoJSON Load Error:', error);
            });
        
        // ๐ ุฏุงูุฉ ุชูุธูู ุงูุงุณู
        function cleanName(name) {
            return name.replace(/^[\(\d\)\-\s]+/, '').trim().toLowerCase();
        }
        
        // โ ุฏุงูุฉ ุฅุธูุงุฑ ุจูุจ ุฃุจ ุงููุงุนุฉ
        function showNumberPopup(building, floor, room) {
            const popupContent = document.getElementById('popupContent');
            popupContent.innerHTML = `
                <div>๐ข <strong>ุงููุจูู:</strong> ${building}</div>
                <div>๐ฌ <strong>ุงูุฏูุฑ:</strong> ${floor}</div>
                <div>๐๏ธ <strong>ุงููุงุนุฉ:</strong> ${room}</div>
            `;
            document.getElementById('numberPopup').style.display = 'block';
        }
        
        // โ ุฏุงูุฉ ุฅุบูุงู ุงูุจูุจ ุฃุจ
        function closePopup() {
            document.getElementById('numberPopup').style.display = 'none';
        }
        
        // ๐ ุฏุงูุฉ ุงูุจุญุซ ุนู ูุจูู
        function searchBuilding() {
            const input = document.getElementById('searchInput').value.trim();
            if (!input) return;
        
            const loweredInput = input.toLowerCase();
            const isNumber = !isNaN(loweredInput);
            let matchedBuilding = null;
        
            if (isNumber) {
                const num = parseInt(loweredInput);
        
                if (input.length === 4) {
                    const building = parseInt(input.charAt(0));
                    const floor = parseInt(input.charAt(1));
                    const room = input.substring(2);
                    showNumberPopup(building, floor, room);
                } else if (input.length === 5) {
                    const building = parseInt(input.substring(0, 2));
                    const floor = parseInt(input.charAt(2));
                    const room = input.substring(3);
                    showNumberPopup(building, floor, room);
                }
        
                matchedBuilding = buildings.find(b => {
                    return (b.room && num >= b.room && num <= b.room + 499) ||
                           (b.shortRoom && String(b.shortRoom) === String(num));
                });
            } else {
                matchedBuilding = buildings.find(b =>
                    (b.name && b.name.toLowerCase().includes(loweredInput)) ||
                    (b.enName && b.enName.toLowerCase().includes(loweredInput))
                );
            }
        
            if (!matchedBuilding) {
                alert('ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุจูู.');
                return;
            }
        
            const targetLayer = buildingLayers.find(obj => {
                const cleanGeoName = cleanName(obj.feature.name || "");
                const cleanTarget = cleanName(matchedBuilding.name || "");
                return cleanGeoName.includes(cleanTarget);
            });
        
            if (targetLayer) {
                if (targetLayer.layer.openPopup) {
                    targetLayer.layer.openPopup();
                }
        
                const path = targetLayer.layer.getElement && targetLayer.layer.getElement();
                if (path) {
                    path.classList.add('glow-path');
                    const original = targetLayer.originalStyle;
                    targetLayer.layer.setStyle({ 
                        weight: 8, 
                        color: original.color 
                    });
        
                    setTimeout(() => {
                        path.classList.remove('glow-path');
                        targetLayer.layer.setStyle(original);
                    }, 3000);
                }
            } else {
                alert('ูู ูุชู ุงูุนุซูุฑ ุนูู ุทุจูุฉ ุงููุจูู.');
            }
        }
        
        // ๐ ุฑุจุท ุงูุจุญุซ ุจุฒุฑ ูุฅุฏุฎุงู
        document.getElementById('searchButton').addEventListener('click', searchBuilding);
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBuilding();
            }
        });
        </script>
        
        
        




<!-- โ ุณูุฑุจุช ุงูุชูุนูู -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    function toggleSubSidebar(id) {
        document.querySelectorAll('.sub-sidebar').forEach(function (el) {
            el.style.display = (el.id === id && el.style.display !== 'block') ? 'block' : 'none';
        });
    }

    function showMessage() {
        document.getElementById('messageBox').style.display = 'block';
    }

    function closeMessage() {
        document.getElementById('messageBox').style.display = 'none';
    }
</script>
<script>
    const map = L.map('map').setView([21.433, 40.495], 17);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 20,
        attribution: 'ยฉ OpenStreetMap'
    }).addTo(map);

    const loadingMessage = document.getElementById('loadingMessage');
    loadingMessage.style.display = 'block';

    fetch('tu_map_force_colored.geojson')
        .then(res => {
            if (!res.ok) throw new Error('ูุดู ุชุญููู ุงูุจูุงูุงุช');
            return res.json();
        })
        .then(data => {
            L.geoJSON(data, {
                // โ ุฅุถุงูุฉ ููุชุฑ ูููุน ุฑุณู ุงูููุงุท (Point)
                filter: function (feature) {
                    return feature.geometry.type !== 'Point';
                },
                style: function (feature) {
                    const props = feature.properties || {};

                    if (props.name === "ุฌุงูุนู ุงูุทุงุฆู - ุทูุงุจ") {
                        return {
                            color: "blue",
                            weight: 3,
                            fill: false,
                            fillColor: "transparent",
                            fillOpacity: 0,
                            opacity: 1,
                            stroke: true
                        };
                    }

                    const color = props.borderColor || "#888";
                    return {
                        color: color,
                        weight: 2,
                        fillColor: color,
                        fillOpacity: 0.4
                    };
                },
                onEachFeature: function (feature, layer) {
                    const props = feature.properties || {};

                    if (props.name) {
                        layer.bindPopup(props.name);
                    }

                    // ุฌุนู ูู ุงููุจุงูู ูุงูููุงุทู ุชุชููุฌ ุนูุฏ ุงูุชุฃุดูุฑ
                    layer.on('mouseover', function () {
                        const path = layer.getElement && layer.getElement();
                        if (path) {
                            path.classList.add('glow-path');
                            layer.setStyle({ weight: 5 });
                        }
                    });

                    layer.on('mouseout', function () {
                        const path = layer.getElement && layer.getElement();
                        if (path) {
                            path.classList.remove('glow-path');
                            layer.setStyle({ weight: props.name === "ุฌุงูุนู ุงูุทุงุฆู - ุทูุงุจ" ? 3 : 2 });
                        }
                    });
                }
            }).addTo(map);

            loadingMessage.style.display = 'none';
        })
        .catch(error => {
            loadingMessage.innerHTML = 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช';
            console.error('GeoJSON Load Error:', error);
        });
</script>


<script>
    const translations = {
        ar: {
            explore: "ุงุณุชูุดุงู",
            buildings: "ุงููุจุงูู",
            medical_admin: "ุงูุฅุฏุงุฑุฉ ุงูุทุจูุฉ",
            food: "ุงูุทุนุงู",
            places: "ุฃูุงููู",
            directions: "ุงูุงุชุฌุงูุงุช",
            reset: "ุฅุนุงุฏุฉ ุชุนููู",
            setStart: "ุชุญุฏูุฏ ููุทุฉ ุงูุจุฏุงูุฉ",
            setEnd: "ุชุญุฏูุฏ ููุทุฉ ุงูููุงูุฉ",
            walking: "ูุดูุงู",
            driving: "ุจุงูุณูุงุฑุฉ",
            showDirections: "ุนุฑุถ ุงูุงุชุฌุงูุงุช",
            events: "ุงูุฃุญุฏุงุซ",
            eventsInfo: "ูุฑุคูุฉ ุงูุฃุญุฏุงุซ ูุขุฎุฑ ุงูุชุญุฏูุซุงุชุ ูู ุจุฒูุงุฑุฉ ุตูุญุฉ ุชููุชุฑ ุงูุฑุณููุฉ:",
            visitTwitter: "ุฒูุงุฑุฉ ุชููุชุฑ",
            startPlaceholder: "ุงุจุญุซ ุฃู ุงููุฑ ููู ุงูุฎุฑูุทุฉ...",
            endPlaceholder: "ุงุจุญุซ ุฃู ุงููุฑ ููู ุงูุฎุฑูุทุฉ...",
            search: "ุจุญุซ",
            searchPlaceholder: "ุงุจุญุซ ุนู ุงููุจูู...",
            welcome: "ุฃููุงู ุจูู ูู ุฌุงูุนุฉ ุงูุทุงุฆู",
            loading: "ุฌุงุฑู ุงูุชุญููู",
            messageText: "ุฎุฑูุทุฉ ุชูุงุนููุฉ ูุฌุงูุนุฉ ุงูุทุงุฆู!",
            colleges: "ุงููููุงุช",
            admin: "ุงูุฅุฏุงุฑุฉ",
            library: "ุงูููุชุจุฉ",
            mosques: "ุงููุณุงุฌุฏ",
            searchTitle: "ุขุฎุฑ ุนูููุงุช ุงูุจุญุซ",
            noSearches: "ูุง ุชูุฌุฏ ุนูููุงุช ุจุญุซ ุณุงุจูุฉ.",
            college: "ูููุฉ",
            administration: "ุงูุฅุฏุงุฑุฉ",
            medical: "ุงูุฅุฏุงุฑุฉ ุงูุทุจูุฉ",
            libraryBuilding: "ุงูููุชุจุฉ",
            mosque: "ุงููุณุฌุฏ",
            restaurant: "ุงููุทุนู",
            distanceInfo: "ุงููุณุงูุฉ ุณุชุธูุฑ ููุง ุจุนุฏ ุชุญุฏูุฏ ุงูููุทุชูู...",
            universityPresidentOffice: "ููุชุจ ูุฏูุฑ ุงูุฌุงูุนุฉ",
            vicePresidentOffice: "ููุชุจ ูููู ุงูุฌุงูุนุฉ",
            scientificCouncil: "ุงููุฌูุณ ุงูุนููู"
        },
        en: {
            explore: "Explore",
            buildings: "Buildings",
            medical_admin: "Medical Administration",
            food: "Food",
            places: "My Places",
            directions: "Directions",
            reset: "Reset",
            setStart: "Set Start Point",
            setEnd: "Set End Point",
            walking: "Walking",
            driving: "Driving",
            showDirections: "Show Directions",
            events: "Events",
            eventsInfo: "For events and latest updates, visit the official Twitter page:",
            visitTwitter: "Visit Twitter",
            startPlaceholder: "Search or click on the map...",
            endPlaceholder: "Search or click on the map...",
            search: "Search",
            searchPlaceholder: "Search for a building...",
            welcome: "Welcome to Taif University",
            loading: "Loading...",
            messageText: "Interactive map of Taif University!",
            colleges: "Colleges",
            admin: "Administration",
            library: "Library",
            mosques: "Mosques",
            searchTitle: "Recent Searches",
            noSearches: "No recent searches.",
            college: "College",
            administration: "Administration",
            medical: "Medical Administration",
            libraryBuilding: "Library",
            mosque: "Mosque",
            restaurant: "Restaurant",
            distanceInfo: "The distance will appear here after selecting two points...",
            universityPresidentOffice: "University President's Office",
            vicePresidentOffice: "Vice President's Office",
            scientificCouncil: "Scientific Council"
        }
    };
    
    
    function setLanguage(lang) {
        const allKeys = document.querySelectorAll("[data-key]");
        allKeys.forEach(el => {
            const key = el.getAttribute("data-key");
            if (translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });
    
        // ุชุบููุฑ placeholder ูุญูู ุงูุจุญุซ
        const searchInput = document.getElementById("searchInput");
        if (searchInput) {
            searchInput.setAttribute("placeholder", translations[lang]["searchPlaceholder"]);
        }
    
        // ุชุบููุฑ ูุต ุฒุฑ ุงูุจุญุซ
        const searchButton = document.getElementById("searchButton");
        if (searchButton) {
            searchButton.textContent = translations[lang]["search"];
        }
    
        // ุชุบููุฑ ูุญุชูู ุฑุณุงูุฉ ุงูุชูุจูู
        const messageText = document.getElementById("messageText");
        if (messageText) {
            messageText.textContent = translations[lang]["messageText"];
        }
    }
    </script>
    
<script>
    // ุฑุจุท ุนูุงุตุฑ ุงูุจุญุซ
    const searchInput = document.getElementById("searchInput");
    const suggestionsList = document.getElementById("suggestionsList");

    // ุชูููุฏ ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ ูู ููู buildings-data.js ุจุฏูู ุชูุฑุงุฑ
    const uniqueArabic = new Set();
    const uniqueEnglish = new Set();

    const suggestions = [];

    buildings.forEach(b => {
        const arName = b.name || "";
        const enName = b.enName || "";

        if (!uniqueArabic.has(arName)) {
            uniqueArabic.add(arName);
        }

        if (!uniqueEnglish.has(enName)) {
            uniqueEnglish.add(enName);
        }

        // ููุท ุฅุฐุง ูู ููุถู ูู ูุจู ุจุฃู ูู ุงููุบุชูู ูุถูู ููุณุฌู ุงูููุงุฆู
        if (!suggestions.some(s => s.ar === arName && s.en === enName)) {
            suggestions.push({ ar: arName, en: enName });
        }
    });

    let selectedIndex = -1;

    // ุนูุฏ ุงููุชุงุจุฉ
    searchInput.addEventListener("input", function () {
        const query = this.value.trim().toLowerCase();
        suggestionsList.innerHTML = "";
        selectedIndex = -1;

        if (!query) {
            suggestionsList.style.display = "none";
            return;
        }

        const isArabic = /^[\u0600-\u06FF\s\d]+$/.test(query);
        const langKey = isArabic ? "ar" : "en";

        const filtered = suggestions.filter(item =>
            item[langKey].toLowerCase().includes(query)
        );

        if (filtered.length > 0) {
            filtered.forEach(item => {
                const li = document.createElement("li");
                li.textContent = item[langKey];
                li.classList.add("suggestion-item");
                li.addEventListener("click", function () {
                    searchInput.value = item[langKey];
                    suggestionsList.style.display = "none";
                    searchBuilding();
                });
                suggestionsList.appendChild(li);
            });
            suggestionsList.style.display = "block";
        } else {
            suggestionsList.style.display = "none";
        }
    });

    // ุงูุชููู ุจูู ุงูุงูุชุฑุงุญุงุช ุจุงูุฃุณูู ูุงูุฅูุชุฑ
    searchInput.addEventListener("keydown", function (event) {
        const items = suggestionsList.querySelectorAll("li");
        if (suggestionsList.style.display === "block" && items.length > 0) {
            if (event.key === "ArrowDown") {
                event.preventDefault();
                if (selectedIndex < items.length - 1) {
                    selectedIndex++;
                    updateSelection(items);
                }
            } else if (event.key === "ArrowUp") {
                event.preventDefault();
                if (selectedIndex > 0) {
                    selectedIndex--;
                    updateSelection(items);
                }
            } else if (event.key === "Enter") {
                event.preventDefault();
                if (selectedIndex >= 0 && selectedIndex < items.length) {
                    searchInput.value = items[selectedIndex].textContent;
                    suggestionsList.style.display = "none";
                }
                searchBuilding();
            }
        }
    });

    // ุชูุนูู ุงูุชุญุฏูุฏ
    function updateSelection(items) {
        items.forEach((item, index) => {
            if (index === selectedIndex) {
                item.classList.add("highlight");
                item.scrollIntoView({ block: "nearest" });
            } else {
                item.classList.remove("highlight");
            }
        });
    }

    // ุฅุฎูุงุก ุงูุงูุชุฑุงุญุงุช ุนูุฏ ุงูุถุบุท ุจุงูุฎุงุฑุฌ
    document.addEventListener("click", function (e) {
        if (!document.querySelector(".search-container").contains(e.target)) {
            suggestionsList.style.display = "none";
        }
    });
</script>

    

</body>
</html>
